# Higher order components (HOCs) and render props

-  Method used to pass information between components before Context
-  Common in third party libraries, especially auth/auth
-  Common when using Redux
-  Independent components used as props for consuming components
-  Export what's returned from the HOC call instead of the component

```jsx
const Speakers = ({ speakers }) => {
	return <div>{speakers}...</div>;
};

export default withData()(Speakers);
```

-  Render props are embedded in component and returned with the component

```jsx
const Speakers = () => {
	return (
		<MyRP>
			{({ speakers }) => {
				return <div>{speakers}...</div>;
			}}
		</MyRP>
	);
};

export default Speakers;
```

Help separate "get the data" from "render the data".

## HOCs

Create a new component that has both data and UI and then separate data from UI

-  In `pages/speakers.tsx`, `Speakers` with an array of three speakers (image source and name only) and returning image tags (`speakers.map()`)

```tsx
const Speakers = () => {
	const speakers = [
		{ imageSrc: 'speaker-1124', name: 'Douglas Crockford' },
		{ imageSrc: 'speaker-1530', name: 'Tamara Baker' },
		{ imageSrc: 'speaker-10803', name: 'Eugene Chuvyrov' },
	];

	return (
		<div>
			{speakers.map(({ imageSrc, name }) => {
				return <img src={`images/${imageSrc}`} alt={name} key={imageSrc}></img>;
			})}
		</div>
	);
};
```

HOC -> function that takes a component and returns a new component

```tsx
const EnhancedSpeaker = withData(Speakers);
```

Now we need `withData()`, which doesn't do much for now

-  Good info on best TS syntax for this is hard to come by because it varies depending on factors

```tsx
function withData(ComponentToWrap: ComponentType) {
	const WrappedComponent = (props: any) => {
		return <ComponentToWrap {...props} />;
	};
	return WrappedComponent;
}
```

Looks like the video is chopped up wrong here.

When I run with those parts in place and `export default EnhancedSpeaker` and navigate to `localhost:3000/speakers`, I get broken images, but alt texts as expected. Add `.jpg` on the end of the `<img src="" />` source and the images load.

Now he moves the data out of `Speakers` into `withData` and passes the speaker array to `Speakers` as a prop. This gives TypeScript fits, possibly because I'm not sure what React types I should be using. But with some `any`ing, I'm able to get it to work for demo purposes.

The key point is, we've moved the data (state, etc.) out of the `Speakers` component. `withData()` is reusable with other components. So

-  Move `withData()` to a separate file and import.
-  I moved the interface that defines the speaker data structure with it and named it `IHOCSpeaker`
-  In `pages/speakers.tsx`, `export default withData(Speakers)`

Redux uses similar syntax -- `export default connect()(TheComponent)`

So, imagine we want `withData()` to show two speakers only.

```ts
// in speakers.tsx
export default withData(2)(Speakers);

// in withData.tsx
function withData(maxToShow: number) {
   return function (ComponentToWrap: any) {
      ...
      const WrappedComponent = (props: any) => {
			const slicedSpeakers = speakers.slice(0, maxToShow);
			return <ComponentToWrap {...props} speakers={slicedSpeakers} />;
		};
      ...
   }
}

```

The example is simplistic. Understand the concept of what's going on here, which is like a higher order function in functional programming.

**COMMIT: 6.0.1 - FEAT: add a speakers page that demonstrates how a higher order component works**
